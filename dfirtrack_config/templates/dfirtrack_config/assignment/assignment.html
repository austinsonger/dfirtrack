<!-- extending maintemplate -->
{% extends "dfirtrack_main/maintemplate.html" %}

<!-- HTML head in maintemplate -->
{% block head %}

<!-- page title -->
<title>
    Assignments
</title>

{% load static %}

<!-- javascript and CSS for datatables -->
<link rel="stylesheet" type="text/css" href="{% static 'dfirtrack_main/datatables-1.10.16/datatables.min.css' %}"/>
<script src="{% static 'dfirtrack_main/datatables-1.10.16/datatables.js' %}"></script>

<!-- HTML head in maintemplate -->
{% endblock %}

<!-- ############################################ -->

<!-- HTML body in maintemplate -->
{% block content %}

<!-- javascript for copy button -->
<script>
    var clipboard = new ClipboardJS('.btn');
</script>

<!-- headline row -->
<div class="row">

    <!-- headline -->
    <div class="col-6">
        <h5>
            <img src="{% static 'dfirtrack_main/icons/people-light.svg' %}" class="icon right-distance copy-false" alt="icon">
            Assignments
        </h5>
    </div>

<!-- headline row -->
</div>

<!-- ############################################ -->

<!-- filter form -->
<form method="POST" class="post-form">

    {% csrf_token %}

    <!-- show form related errors -->
    {% include "dfirtrack_main/includes/form_errors.html" %}

    <!-- filter row -->
    <div class"row top-distance bottom-distance">

        <!-- form fields -->
        {{ form.user }}
        {{ form.case }}
        {{ form.tag }}

        <!-- apply button -->
        {% include "dfirtrack_main/includes/button_apply_filter.html" %}

        <!-- clear button -->
        {% with clear_url='clear_assignment_view_filter' %}
            {% include "dfirtrack_main/includes/button_clear_filter.html" %}
        {% endwith %}

    <!-- filter row -->
    </div>

    <!-- persistence settings row -->
    <div class"row bottom-distance">

        <!-- keep filter settings -->
        {{ form.filter_assignment_view_keep }}
        {{ form.filter_assignment_view_keep.label }}

    <!-- persistence settings row -->
    </div>

<!-- filter form -->
</form>

<!-- ############################################ -->

<!-- system block -->
<div class="card bg-dark border-light card-body top-distance">

    <!-- system headline -->
    <div class="row bottom-distance">
        <div class="col-6">
            <h5>
                <img src="{% static 'dfirtrack_main/icons/monitor-light.svg' %}" class="icon right-distance copy-false" alt="icon">
                {% if assignment_user %}
                    Systems assigned to '{{ assignment_user }}'{% if system %} ({{ system|length }}){% endif %}
                {% else %}
                    Unassigned systems{% if system %} ({{ system|length }}){% endif %}
                {% endif %}
            </h5>
        </div>
    </div>

    <!-- javascript for datatables -->
    <script src="{% static 'dfirtrack_main/dfirtrack/datatables_dfirtrack.js' %}"></script>

    <!-- systems -->
    {% if system %}

        <!-- datatable system -->
        <table id="table_system" class="display" width="100%">

            <!-- table head -->
            <thead>
                {% include "dfirtrack_main/includes/datatable_thead_table_system.html" %}
            </thead>

            <!-- table body -->
            <tbody>
            </tbody>

        <!-- datatable system -->
        </table>

    <!-- no systems -->
    {% else %}
        <div class="row top-distance">
            <div class="col-3">
                ---
            </div>
        </div>

    <!-- systems -->
    {% endif %}

<!-- system block -->
</div>

<!-- ############################################ -->

<!-- artifact block -->
<div class="card bg-dark border-light card-body top-distance">

    <!-- artifact headline -->
    <div class="row bottom-distance">
        <div class="col-6">
            <h5>
                <img src="{% static 'dfirtrack_main/icons/bug-light.svg' %}" class="icon right-distance copy-false" alt="icon">
                {% if assignment_user %}
                    Artifacts assigned to '{{ assignment_user }}'{% if artifact %} ({{ artifact|length }}){% endif %}
                {% else %}
                    Unassigned artifacts{% if artifact %} ({{ artifact|length }}){% endif %}
                {% endif %}
            </h5>
        </div>
    </div>

    <!-- artifacts -->
    {% if artifact %}

        <!-- datatable artifact -->
        <table id="table_artifact" class="display" width="100%">

            <!-- table head -->
            <thead>
                {% include "dfirtrack_artifacts/includes/datatable_thead_table_artifact.html" %}
            </thead>

            <!-- table body -->
            <tbody>
                {% for i in artifact %}
                    {% include "dfirtrack_artifacts/includes/datatable_tbody_table_artifact.html" %}
                {% endfor %}
            </tbody>

        <!-- datatable artifact -->
        </table>

        <!-- javascript for datatables -->
        <script src="{% static 'dfirtrack_artifacts/datatables_artifacts.js' %}"></script>

    <!-- no artifacts -->
    {% else %}
        <div class="row top-distance">
            <div class="col-3">
                ---
            </div>
        </div>

    <!-- artifacts -->
    {% endif %}

<!-- artifact block -->
</div>

<!-- ############################################ -->

<!-- case block -->
<div class="card bg-dark border-light card-body top-distance">

    <!-- case headline -->
    <div class="row bottom-distance">
        <div class="col-6">
            <h5>
                <img src="{% static 'dfirtrack_main/icons/list-light.svg' %}" class="icon right-distance copy-false" alt="icon">
                {% if assignment_user %}
                    Cases assigned to '{{ assignment_user }}'{% if case %} ({{ case|length }}){% endif %}
                {% else %}
                    Unassigned cases{% if case %} ({{ case|length }}){% endif %}
                {% endif %}
            </h5>
        </div>
    </div>

    <!-- cases -->
    {% if case %}

        <!-- datatable case -->
        <table id="table_case" class="display" width="100%">

            <!-- table head -->
            <thead>
                {% include "dfirtrack_main/includes/datatable_thead_table_case.html" %}
            </thead>

            <!-- table body -->
            <tbody>
                {% for i in case %}
                    {% include "dfirtrack_main/includes/datatable_tbody_table_case.html" %}
                {% endfor %}
            </tbody>

        <!-- datatable case -->
        </table>

    <!-- no cases -->
    {% else %}
        <div class="row top-distance">
            <div class="col-3">
                ---
            </div>
        </div>

    <!-- cases -->
    {% endif %}

<!-- case block -->
</div>

<!-- ############################################ -->

<!-- task block -->
<div class="card bg-dark border-light card-body top-distance">

    <!-- task headline -->
    <div class="row bottom-distance">
        <div class="col-6">
            <h5>
                <img src="{% static 'dfirtrack_main/icons/task-light.svg' %}" class="icon right-distance copy-false" alt="icon">
                {% if assignment_user %}
                    Tasks assigned to '{{ assignment_user }}'{% if task %} ({{ task|length }}){% endif %}
                {% else %}
                    Unassigned tasks{% if task %} ({{ task|length }}){% endif %}
                {% endif %}
            </h5>
        </div>
    </div>

    <!-- tasks -->
    {% if task %}

        <!-- datatable task -->
        <table id="table_task" class="display" width="100%">

            <!-- table head -->
            <thead>
                {% include "dfirtrack_main/includes/datatable_thead_table_task.html" %}
            </thead>

            <!-- table body -->
            <tbody>
                {% for i in task %}
                    {% include "dfirtrack_main/includes/datatable_tbody_table_task.html" %}
                {% endfor %}
            </tbody>

        <!-- datatable task -->
        </table>

    <!-- no tasks -->
    {% else %}
        <div class="row top-distance">
            <div class="col-3">
                ---
            </div>
        </div>

    <!-- tasks -->
    {% endif %}

<!-- task block -->
</div>

<!-- javascript for datatables -->
{% block datatables %}
    <script src="{% static 'dfirtrack_main/datatables-1.10.16/datatables.min.js' %}"></script>
{% endblock %}

<!-- HTML body in maintemplate -->
{% endblock %}
